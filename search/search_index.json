{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Getting Started","text":""},{"location":"#getting-started","title":"Getting Started","text":"<p>Welcome to the documentation for the North-Atlatic-ARCtic (NAARC) configuration</p>"},{"location":"#introduction","title":"Introduction","text":"<p>As part of the Climate Change in the Arctic and North Atlantic Region and Impacts on the UK (CANARI) project, the National Oceanography Centre has developed a regional NEMO configuration of the North Atlantic and Arctic oceans.</p>"},{"location":"#configuration","title":"Configuration","text":"<p>The NAARC configuration is based on NEMO v4.2.2 with a horizontal resolution of 1/12\\(^{\\circ}\\).</p> <p>The key features are summarised below:</p> <ul> <li>1/12\\(^{\\circ}\\) nominal horizontal resolution (j=3605, i=4320).</li> <li>75 vertical Multi-Evelope s-levels (MEs).</li> <li>Coupled to SI\\(^{3}\\) sea ice engine.</li> <li>Initialised from eORCA025 NOC-Near-Present-Day (1979) simulations.</li> <li>Forced with JRA55-do (v1; 1976-2023) atmospheric and riverine forcing.</li> </ul> <p>For more details on the NAARC configuration see Deep Dives: Model Configurations.</p>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#installation","title":"Installation","text":"<p>To get started, check out and set up an instance of the NAARC GitHub repository:</p> <pre><code>git clone git@github.com:NOC-MSM/NAARC.git\n</code></pre> Helpful Tip... <ul> <li>It is not advised to checkout the respository in your home directory.</li> </ul> <p>Next, run the setup script to download NEMO &amp; compile the tools and configurations. At present the setup  script has been tested and will checkout, compile and run the NAARC (NEMO 4.2.2) code on: ARCHER2 for Cray-MPICH and GNU-MPICH, and Anemone for iFort.</p> AnemoneArcher2 <pre><code>cd NAARC\n\n./NAARC/scripts/setup/NAARC_setup -p $PWD/NAARC_RUNS  -r $PWD/NAARC -n 4.2.2 -x 2 -m anemone -a impi -c ifort\ncd NAARC_RUNS/nemo/cfgs/NAARC//\ncp -rP EXPREF EXP_MYRUN\ncd EXP_MYRUN\nln -s ../INPUTS/domain_cfg_mes.nc domain_cfg.nc\n</code></pre> <pre><code>cd NAARC\n\n./NAARC/scripts/setup/NAARC_setup -p $PWD/NAARC_RUNS  -r $PWD/NAARC -n 4.2.2 -x 2 -m archer2 -a mpich -c gnu\ncd NAARC_RUNS/nemo/cfgs/NAARC/\ncp -rP EXPREF EXP_MYRUN\ncd EXP_MYRUN\nln -s ../INPUTS/domain_cfg_mes.nc domain_cfg.nc\n</code></pre> <p>In the case of <code>-m archer2</code> one can also complile with <code>-c cray</code>.</p>"},{"location":"#running-an-experiment","title":"Running An Experiment","text":"<p>Edit the project code and options in  <code>runscript.slurm</code> then:</p> <pre><code>sbatch runscript.slurm -y 1979 -s 1\n</code></pre> <p>This will produce a 5 day mean output from the beginning of 1979. The run should take 15 minutes to complete once in the machine. To extend this to a full year's simulation, edit the <code>runscript.slurm</code> file and change:</p> <p></p><pre><code>   nn_itend    =    8928   !  last  time step (std 5840)\n!  nn_itend    =    XXX_TEN_XXX   !  last  time step (std 5840)\n</code></pre> to <pre><code>!  nn_itend    =    8928   !  last  time step (std 5840)\n   nn_itend    =    XXX_TEN_XXX   !  last  time step (std 5840)\n</code></pre><p></p>"},{"location":"#forcing-data","title":"Forcing data:","text":"<p>NAARC</p> <p>this is automatically transferred when the setup script is executed</p> <p>For ARCHER2 users these data are held under <code>/work/n01/shared/NAARC</code> and <code>/work/n01/shared/nemo/FORCING</code> and are linked during the setup.</p>"},{"location":"analysis/","title":"Analysis","text":""},{"location":"analysis/#analysis","title":"Analysis","text":"<p>Page Currently Under Development: Come Back Soon!</p> <p>This page will include a gallery of example analyses undertaken using the NAARC simulation.</p>"},{"location":"deep_dives/","title":"Model Configuration","text":""},{"location":"deep_dives/#model-configuration","title":"Model Configuration","text":"<p>Summary</p> <p>This page provide additional details on the parameter choices, initial/surface/boundary conditions and output options of the base NAARC simulation.</p>"},{"location":"deep_dives/#overview","title":"Overview","text":"<p>The NAARC integrations have been performed using the NEMO ocean sea-ice model configurations at 1/12\\(^{\\circ}\\) nominal horizontal resolution.</p> <p>They are based on the recent UK Global Ocean and Sea Ice configuration version 9 (GOSI9), which has been documented comprehensively in Guiavarc\u2019h et al. (in review).</p> <p>In this section, we describe the configuration in detail and provide references for those seeking further technical information.</p>"},{"location":"deep_dives/#ocean-model","title":"Ocean Model","text":"<p>The NAARC configuration has been developed using the Nucleus for European Modelling of the Ocean (NEMO) modelling framework version 4.2.2. There have been several modifications to the code base, which are listed under [Modifications]: #Modifications. Although we are wedded to NEMO 4.2.2 for the CANARI project the repository is also configured to setup NAARC at 4.2.3 and 4.2_HEAD.</p> <p>For a list of the additions made to the version 4.2 release, users are referred to the NEMO release notes.</p>"},{"location":"deep_dives/#model-grid-bathymetry","title":"Model Grid &amp; Bathymetry","text":"<p>The ocean model horizontal grid and bathymetry used for the NAARC simulations are the same as documented in Storkey et al (2018).</p> <p>The NAARC configuration is based on the eORCA12 grid and has a horizontal resolution of 1/12\\(^{\\circ}\\). A mask is applied to the eORCA12 grid at run-time providing an active domain north of 20\\(^{\\circ}\\)S  in the Atlantic and Arctic, through to 67^{\\circ}\\(N in the Pacific. The vertical coordinates are defined over 75 levels using a mix of Multi-Enevelope s-coordinates [Bruciaferri et al (2018)](https://link.springer.com/article/10.1007/s10236-018-1189-x)  in the shelf regions (see [MEs]: #MEs for further details), and z\\)^{*}$ coordinates, Adcroft and Campin, 2004 with partial step topography (e.g., Barnier et al., 2006) in the remaining open ocean.</p>"},{"location":"deep_dives/#mixing","title":"Mixing","text":"<ul> <li> <p>Momentum Advection: Vector-invariant form separating horizontal advection into a rotational term (scheme of Arakawa &amp; Lamb, 1981) and irrotational term (scheme of Hollingsworth et al., 1983).</p> </li> <li> <p>Tracer Advection: 4th Order Total Variance Diminishing (TVD) scheme (Zalesak, 1979) in both horizontal and vertical directions.</p> </li> <li> <p>Lateral Diffusion of Momentum: Performed along iso-level surfaces with the following parameters:</p> <pre><code>* Bi-Laplacian viscosity with a lateral viscous velocity = 0.1895 m s$^{-1}$\n</code></pre> </li> <li> <p>Lateral Diffusion of Tracers: Performed using a triad rotated lapalcian operator on iso-neutral surfaces (Griffies et al, 1998) :</p> <pre><code>* Lateral diffusive velocity = 0.027 m s$^{-1}$.\n* Using all four triads\n* Pure horizontal mixing in the mixed layer\n* Lateral mixing on bottom\n</code></pre> </li> <li> <p>Vertical Mixing of Momentum &amp; Tracers: Performed using turbulent closure Generic Length Scale (GLS) scheme based on prognostic equations for the turbulent kinetic energy and another for the generic length scale (see Reffray et al., 2015 and references therein).</p> </li> </ul>"},{"location":"deep_dives/#tides","title":"Tides","text":"<ul> <li> <p>Forcing</p> </li> <li> <p>Boundary</p> </li> </ul>"},{"location":"deep_dives/#equation-of-state","title":"Equation of State","text":"<p>The NAARC simulations use the Thermodynamic Equation Of Seawater 2010 (TEOS-10, Ioc et al., 2010) and hence absolute salinity and conservative temperature variables are output rather than practical salinity and potential temperature as in EOS-80.</p>"},{"location":"deep_dives/#atmospheric-forcing","title":"Atmospheric Forcing","text":"<p>The base NAARC simluations are forced over the period 1979-2023 by the JRA55-do atmospheric reanalysis (Tsujino et al, 2018) using the NCAR bulk formulae (Large and Yeager, 2009). River inflow is also derived from the JRA55-do dataset with time-varying input over the top 10m. </p> <p>Accounting for Current Feedback to the Atmosphere</p> <p>Since global atmospheric reanalyses already take into account the coupling between ocean currents and surface wind wind stress (termed the Current Feedback), directly forcing an ocean model with reanalysis (relative) winds results in unrealistically weak mesoscale activity and large-scale circulation features (see Renault et al., 2020).</p> <p>To overcome this, the parameterisation of Renault et al., 2017 is used to remove the wind and surface stress anomalies induced by the reanalysis surface ocean currents and replace them with those induced by the currents of the Near-Present-Day simulation. This relies on a linear estimate for the current-stress coupling coefficient, \\(S_{\\tau} = \\alpha |U_{10_{abs}}| + \\beta\\), where \\(\\alpha\\) = -2.9x10\\(^{-3}\\) N s\\(^{2}\\) m\\(^{-4}\\) and \\(\\beta\\) = 0.008 N s m\\(^{-3}\\).</p>"},{"location":"deep_dives/#initial-conditions","title":"Initial Conditions","text":"<p>To initialise the NAARC integrations, conservative temperature, absolute salinity and ice fields from the eORCA025 NOC-Near-Present-Day (1979) simulations are used.</p>"},{"location":"deep_dives/#sea-surface-salinity-restoration","title":"Sea Surface Salinity Restoration","text":"<p>None at present</p>"},{"location":"deep_dives/#sea-ice-model","title":"Sea Ice Model","text":"<p>The Near-Present-Day simulations use NEMO's recently introduced dynamic-thermodynamic continuum sea ice model, SI\\(^{3}\\) (Sea Ice modelling Integrated Initiative) (see Vancoppenolle et al., 2023).</p> <p>For a more detailed discussion on the SI\\(^{3}\\) model configuration, users are referred to Blockley et al. (2023) and Guiavarc\u2019h et al., in review.</p>"},{"location":"deep_dives/#creating-initial-conditions","title":"Creating Initial Conditions","text":"<p>Section Currently Under Development: Come Back Soon!</p> <p>This section will include a description on how to create initial conditions for Near-Present-Day integrations.</p>"},{"location":"deep_dives/#editing-the-runscript","title":"Editing the Runscript","text":"<p>To run your own Near-Present-Day integrations, you'll likely need to make changes to the <code>run_nemo_???.slurm</code> runscript in the <code>/nemo/cfgs/GLOBAL_QCO/eORCA??/</code> directory of your local installation of the NOC_Near_Present_Day repository.</p> <p>In this section, we discuss the key parameters you will need to modify to begin running your own Near-Present-Day experiments.</p> <p>Let's start by defining each of the parameters available in an example runscript <code>run_nemo_example.slurm</code>:</p> run_nemo_example.slurm<pre><code># ========================================================\n# PARAMETERS TO SET\n# time units used here for restart frequency and simulaion length\nTIME_UNITS=0 # 0=years ; 1=days ; 2=hours\n# Restart/resubmission frequency (in TIME_UNITS)\nFREQRST=1\n# job-step initial time step (0: infer from time.step)\n# IT000 != 0 -&gt; auto-resubmission is switched OFF\nIT000=0\n#\n# Simulation original starting time step (unchanged for LENGTHxTIME_UNITS)\nITBEGIN=1\n# Simulation length (in TIME_UNITS) \nLENGTH=3   \n# Name of this script (to resubmit)\nSCRIPTNAME=run_nemo_example.slurm\n# If conducting the repeat and reset T and S spinup set SPIN to 1, else set to 0\nSPIN=0\n</code></pre> <ul> <li> <p>TIME_UNITS is used to define the length of the simulation and to specify the resubmission frequency of the runscript. In the above example, <code>TIME_UNITS=0</code> indicates we are working in years.</p> </li> <li> <p>FREQRST defines the frequency (in the time units defined above) at which the runscript will be resubmitted as a SLURM batch job. In the above example, <code>FREQRST=1</code> indicates that every simulation year should be submitted as a separate SLURM batch job (dependent on the successful completion of the previous job/year).</p> </li> <li> <p>IT000 specifies the initial time-step of this job. If <code>IT000=0</code> then the initial time-step will be determined from the time.step file in the run directory (if no time.step files exists then IT000 is set to 1). When IT000 != 0, runscript resubmission is turned off and its value will be unchanged.</p> </li> <li> <p>ITBEGIN specifies the starting time-step of the simulation. This is used to update the namelist_cfg file with the final time-step of the job when a restart file is to be written.</p> </li> <li> <p>LENGTH defines the length of the simulation (in the time units defined above). The simulation length together with the frequency of resubmission (FREQRST) will determine the number of SLURM batch jobs which are created. In the above example, <code>LENGTH=3</code> and <code>FREQRST=1</code> means that 3 separate SLURM batch jobs will be required to complete this simulation.</p> </li> <li> <p>SCRIPTNAME defines the name of the runscript to be resubmitted as a SLURM batch job. In most cases this should be the name of the runscript and should be checked carefully!</p> </li> <li> <p>SPIN specifies that a spin-up simulation should be perfomed. If <code>SPIN=1</code>, the simulation year will be restarted and the atmospheric forcing repeated, but the initial temperature and salinity fields will be defined from the restart file produced at the final time-step of the previous simulation year. Once a spin-up simulation is completed, define <code>SPIN=0</code> to continue the simulation with the next year of atmospheric forcing.  </p> </li> </ul>"},{"location":"deep_dives/#a-typical-use-case","title":"A Typical Use Case:","text":"<p>Let's consider a typical example: a user would like to perform a 25-year hindcast simulation (2000-2024) starting with a 5-year spin-up simulation repeating the year 2000. The user would also like each simulation year to be submitted as a separate SLURM batch job.</p> <p>We can divide this workflow into two runscripts: (1) to perform the spin-up simulation from rest...</p> <p></p>run_nemo_example_spin-up.slurm<pre><code># ========================================================\n# PARAMETERS TO SET\n# time units used here for restart frequency and simulaion length\nTIME_UNITS=0 # 0=years ; 1=days ; 2=hours\n# Restart/resubmission frequency (in TIME_UNITS)\nFREQRST=1\n# job-step initial time step (0: infer from time.step)\n# IT000 != 0 -&gt; auto-resubmission is switched OFF\nIT000=0\n#\n# Simulation original starting time step (unchanged for LENGTHxTIME_UNITS)\nITBEGIN=1\n# Simulation length (in TIME_UNITS) \nLENGTH=5   \n# Name of this script (to resubmit)\nSCRIPTNAME=run_nemo_example_spin-up.slurm\n# If conducting the repeat and reset T and S spinup set SPIN to 1, else set to 0\nSPIN=1\n</code></pre> ...and (2) to perform the 25-year hindcast simulation.<p></p> run_nemo_example_hindcast.slurm<pre><code># ========================================================\n# PARAMETERS TO SET\n# time units used here for restart frequency and simulaion length\nTIME_UNITS=0 # 0=years ; 1=days ; 2=hours\n# Restart/resubmission frequency (in TIME_UNITS)\nFREQRST=1\n# job-step initial time step (0: infer from time.step)\n# IT000 != 0 -&gt; auto-resubmission is switched OFF\nIT000=0\n#\n# Simulation original starting time step (unchanged for LENGTHxTIME_UNITS)\nITBEGIN=1\n# Simulation length (in TIME_UNITS) \nLENGTH=30   \n# Name of this script (to resubmit)\nSCRIPTNAME=run_nemo_example_hindcast.slurm\n# If conducting the repeat and reset T and S spinup set SPIN to 1, else set to 0\nSPIN=0\n</code></pre> <p>Note on Modifying Parameters between Runscripts</p> <p>In the example above, we did not modify <code>ITBEGIN</code> in <code>run_nemo_example_hindcast.slurm</code> since using <code>IT000=0</code> means that this simulation will automatically start in 2001 following the final year of the 2000 spin-up simulation.</p> <p>Also, note that <code>LENGTH=30</code> in <code>run_nemo_example_hindcast.slurm</code> defines the total simulation length in years, including the 5-year spin-up period and 25-year hindcast, rather than the number of additional years to simulate starting from 2001.  </p>"},{"location":"deep_dives/#storing-output-with-a-zoom-domain","title":"Storing Output with a Zoom Domain","text":"<p>Section Currently Under Development: Come Back Soon!</p> <p>This section will include instructions on how to output variables for a sub-domain of the global eORCA grid.</p>"},{"location":"outputs/","title":"Outputs","text":""},{"location":"outputs/#outputs","title":"Outputs","text":"<p>Summary</p> <p>This page provides information on the ocean &amp; sea-ice outputs made available from the NAARC simulations their frequency &amp; how to access them.</p>"},{"location":"outputs/#primary-outputs","title":"Primary Outputs","text":"<p>Primary outputs of the NAARC simulations are those variables which are calculated online at runtime and are written to netCDF files according to where they are defined on the eORCA grid.</p> <p>Example: NAARC T-Grid Variables</p> <p>The conservative temperature <code>thetao_con</code> averaged at monthly intervals will be stored in the <code>NAARC_1m_YYYYMM_grid_T.nc</code> file. </p> <p>Below we include tables of the available ocean and sea-ice variables output by each NAARC simulation:</p>"},{"location":"outputs/#list-of-available-ocean-sea-ice-outputs","title":"List of Available Ocean &amp; Sea-Ice Outputs","text":"<p>In Progress: We are currently working on improving access to the NAARC simulations by using Intake to catalog the available datasets.</p>"},{"location":"outputs/#transport-diagnostics","title":"Transport Diagnostics","text":"<p>Using diadct</p>"},{"location":"outputs/#secondary-outputs","title":"Secondary Outputs","text":"<p>Secondary outputs of the NAARC simulations include those diagnostics which are calculated offline using the primary output variables.</p>"},{"location":"outputs/#amoc","title":"AMOC","text":"<p>The Atlantic Meridional Overturning Circulation (AMOC) is a fundamental component of the global climate system owing to its role in the redistribution of heat, nutrients and freshwater. On account of its wider societal significance, a number of continuous ocean observing systems have been deployed throughout the Atlantic Ocean to monitor the state and variability of the AMOC.</p> <p>The METRIC Python package allows users to calculate meridional overturning and heat transport diagnostics in numerical models which are equivalent (and hence comparable) to existing observations at the RAPID (26.5\\(^{\\circ}\\)N), MOVE (16\\(^{\\circ}\\)N) and SAMBA (34.5\\(^{\\circ}\\)S) (see Danabasoglu et al., 2021).</p> <p>Diagnostics including meridional overturning stream functions and the meridional fluxes of heat and freshwater will be made available as secondary output variables via the [JASMIN Object Store].</p>"},{"location":"outputs/#accessing-naarc-simulation-outputs","title":"Accessing NAARC Simulation Outputs.","text":"<p>JASMIN</p> <pre><code>---\ntitle: NAARC Outputs available via JASMIN\nconfig:\n  layout: elk\n  look: handDrawn\n  theme: neutral\n---\ngraph LR\n  subgraph npd-eorca12-jra55v1 [eORCA12]\n      NAARC.T1m[T1m]\n      NAARC.U1m[U1m]\n      NAARC.V1m[V1m]\n     end\n\n    A[noc-msm-o.s3-ext.jc.rl.ac.uk] --&gt; B[npd-eorca1-jra55v1]\n    B --&gt; npd-eorca1-jra55v1\n    A --&gt; C[npd-eorca025-jra55v1]\n    C --&gt; npd-eorca025-jra55v1\n    A --&gt; D[npd-eorca12-jra55v1]\n    D --&gt; npd-eorca12-jra55v1\n</code></pre> <p>In Progress: We are currently working on improving access to the NAARC simulations by using Intake to catalog the available datasets.</p>"},{"location":"validation/","title":"Validation","text":""},{"location":"validation/#validation","title":"Validation","text":"<p>Page Currently Under Development: Come Back Soon!</p> <p>This page will include a gallery of plots validating NAARC simulations against observations and ocean (re)analyses.</p> <p></p>"}]}